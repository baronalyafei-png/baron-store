<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Dashboard - Baron</title>
<style>
body{
    background:#0A0A0A;
    color:#EFEFEF;
    font-family:Arial;
    text-align:center;
    padding:40px;
}
.container{
    width:400px;
    margin:0 auto;
    text-align:left;
    background:#111;
    padding:20px;
    border-radius:15px;
    box-shadow:0 0 20px rgba(181,60,184,0.4);
}
input, textarea{
    width:100%;
    padding:8px;
    margin:5px 0;
    border:none;
    border-radius:8px;
}
button{
    width:100%;
    padding:10px;
    background:#B53CB8;
    border:none;
    color:white;
    border-radius:8px;
    margin-top:10px;
    cursor:pointer;
}
button:hover{
    opacity:0.9;
}
.logout{
    margin-top:30px;
    background:#444;
}
</style>
</head>

<body>

<h1>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Baron ğŸ‘‘</h1>

<div class="container">
<h3>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h3>

<input type="text" id="productName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
<input type="number" id="productPrice" placeholder="Ø§Ù„Ø³Ø¹Ø±">
<input type="text" id="productCategory" placeholder="Ø§Ù„ÙØ¦Ø©">
<input type="text" id="productColor" placeholder="Ø§Ù„Ù„ÙˆÙ†">
<textarea id="productDescription" placeholder="Ø§Ù„ÙˆØµÙ"></textarea>
<input type="text" id="productImage" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©">

<button id="addProductBtn">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬</button>
</div>

<button id="logoutBtn" class="logout">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>

<script type="module">

import { auth, db } from "../firebase-config.js";
import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
import { collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

// Ø­Ù…Ø§ÙŠØ© Ø§Ù„ØµÙØ­Ø©
onAuthStateChanged(auth, (user) => {
    if (!user) {
        window.location.href = "login.html";
    }
});

// ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬
document.getElementById("logoutBtn").addEventListener("click", () => {
    signOut(auth).then(() => {
        window.location.href = "login.html";
    });
});

// Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬
document.getElementById("addProductBtn").addEventListener("click", async () => {

    const name = document.getElementById("productName").value;
    const price = document.getElementById("productPrice").value;
    const category = document.getElementById("productCategory").value;
    const color = document.getElementById("productColor").value;
    const description = document.getElementById("productDescription").value;
    const image = document.getElementById("productImage").value;

    try {
        await addDoc(collection(db, "products"), {
            name: name,
            price: Number(price),
            category: category,
            color: color,
            description: description,
            image: image,
            createdAt: new Date()
        });

        alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­ ğŸ‘‘");

        document.getElementById("productName").value = "";
        document.getElementById("productPrice").value = "";
        document.getElementById("productCategory").value = "";
        document.getElementById("productColor").value = "";
        document.getElementById("productDescription").value = "";
        document.getElementById("productImage").value = "";

    } catch (error) {
        console.error(error);
        alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø¶Ø§ÙØ©");
    }

});

</script>

</body>
</html>
