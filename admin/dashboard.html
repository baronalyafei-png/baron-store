<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Baron System ERP</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
--primary:#4F46E5;
--danger:#EF4444;
--success:#22C55E;
--bg:#F8FAFC;
--card:#FFFFFF;
--text:#111827;
--shadow:0 10px 30px rgba(0,0,0,0.05);
}

body.dark{
--bg:#0F172A;
--card:#1E293B;
--text:#F1F5F9;
--shadow:0 10px 30px rgba(0,0,0,0.3);
}

body{
margin:0;
font-family:'Cairo',sans-serif;
background:var(--bg);
color:var(--text);
display:flex;
transition:0.3s;
}

/* Sidebar */
.sidebar{
width:260px;
background:var(--card);
height:100vh;
padding:20px;
box-shadow:var(--shadow);
overflow-y:auto;
position:fixed;
right:0;
top:0;
}

.sidebar h2{
margin-bottom:20px;
}

.sidebar button{
width:100%;
padding:12px;
margin-bottom:8px;
border:none;
background:none;
text-align:right;
cursor:pointer;
border-radius:8px;
font-weight:600;
}

.sidebar button:hover{
background:rgba(79,70,229,0.1);
}

/* Topbar */
.topbar{
position:fixed;
right:260px;
left:0;
height:60px;
background:var(--card);
display:flex;
align-items:center;
justify-content:space-between;
padding:0 20px;
box-shadow:var(--shadow);
z-index:100;
}

/* Content */
.content{
margin-top:70px;
margin-right:260px;
padding:30px;
width:100%;
}

.section{display:none;}
.section.active{display:block;}

.card{
background:var(--card);
padding:20px;
border-radius:14px;
margin-bottom:15px;
box-shadow:var(--shadow);
}

button.action{
background:var(--primary);
color:white;
border:none;
padding:8px 14px;
border-radius:8px;
cursor:pointer;
}

input{
padding:8px;
border-radius:8px;
border:1px solid #ccc;
margin:5px;
}

.toast{
position:fixed;
bottom:20px;
left:20px;
background:var(--primary);
color:white;
padding:15px 20px;
border-radius:10px;
display:none;
}

.toggle{cursor:pointer;}
table{width:100%;border-collapse:collapse;}
th,td{padding:8px;border-bottom:1px solid #ddd;text-align:center;}
</style>
</head>

<body>

<div class="sidebar">
<h2>Baron System ğŸ‘‘</h2>

<button onclick="showSection('dashboard')">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
<button onclick="showSection('pos')">ğŸ›’ POS</button>
<button onclick="showSection('inventory')">ğŸ“¦ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</button>
<button onclick="showSection('analytics')">ğŸ“Š Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª</button>
<button onclick="showSection('marketing')" id="marketingBtn">ğŸ¯ Ø§Ù„ØªØ³ÙˆÙŠÙ‚</button>

<hr>
<button onclick="logout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
</div>

<div class="topbar">
<div id="userRole"></div>
<div>
<span class="toggle" onclick="toggleMode()">ğŸŒ™ / â˜€ï¸</span>
</div>
</div>

<div class="content">

<!-- Dashboard -->
<div id="dashboard" class="section active">
<h2>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-top:20px;">
<div class="card">
<h3>Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…</h3>
<h2 id="todaySales">0 Ø¯.Ù„</h2>
</div>
<div class="card">
<h3>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>
<h2 id="totalProducts">0</h2>
</div>
<div class="card">
<h3>Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</h3>
<h2 id="totalOrders">0</h2>
</div>
</div>
</div>

<!-- POS -->
<div id="pos" class="section">
<h2>Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨ÙŠØ¹</h2>

<div class="card">
<input type="text" id="productName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
<input type="number" id="productPrice" placeholder="Ø§Ù„Ø³Ø¹Ø±">
<button class="action" onclick="addToCart()">Ø¥Ø¶Ø§ÙØ©</button>
</div>

<div class="card">
<h3>Ø§Ù„Ø³Ù„Ø©</h3>
<ul id="cartList"></ul>
<h3 id="cartTotal">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 0 Ø¯.Ù„</h3>
<button class="action" onclick="completeSale()">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¨ÙŠØ¹</button>
</div>
</div>

<!-- Inventory -->
<div id="inventory" class="section">
<h2>Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h2>

<div class="card">
<input type="text" id="invName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
<input type="number" id="invQty" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©">
<button class="action" onclick="addProduct()">Ø¥Ø¶Ø§ÙØ©</button>
</div>

<div class="card">
<table>
<thead>
<tr><th>Ø§Ù„Ù…Ù†ØªØ¬</th><th>Ø§Ù„ÙƒÙ…ÙŠØ©</th></tr>
</thead>
<tbody id="inventoryTable"></tbody>
</table>
</div>
</div>

<!-- Analytics -->
<div id="analytics" class="section">
<h2>Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª</h2>
<div class="card">Ù‚Ø±ÙŠØ¨Ù‹Ø§ Ø³ÙŠØªÙ… Ø±Ø¨Ø·Ù‡Ø§ Ø¨Ù€ Firebase + Charts</div>
</div>

<!-- Marketing -->
<div id="marketing" class="section">
<h2>Ù‚Ø³Ù… Ø§Ù„ØªØ³ÙˆÙŠÙ‚</h2>
<div class="card">
<textarea id="promoText" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠØ©" style="width:100%;height:100px;"></textarea>
<button class="action" onclick="sendPromo()">Ø¥Ø±Ø³Ø§Ù„</button>
</div>
</div>

</div>

<div id="toast" class="toast"></div>

<script>
let cart=[];
let inventory=[];
let totalSales=0;
let totalOrders=0;
let userRole="admin"; // Ù…Ø¤Ù‚Øª Ø­ØªÙ‰ Ù†Ø±Ø¨Ø·Ù‡ Ø¨Ù€ Firebase

function showSection(id){
if(userRole==="staff" && id==="marketing"){
showToast("ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„");
return;
}
document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
document.getElementById(id).classList.add('active');
}

function toggleMode(){
document.body.classList.toggle('dark');
localStorage.setItem('mode',document.body.classList.contains('dark')?'dark':'light');
}

if(localStorage.getItem('mode')==='dark'){
document.body.classList.add('dark');
}

function showToast(msg){
const toast=document.getElementById('toast');
toast.innerText=msg;
toast.style.display='block';
setTimeout(()=>toast.style.display='none',3000);
}

function addToCart(){
const name=document.getElementById("productName").value;
const price=parseFloat(document.getElementById("productPrice").value);
if(!name||!price) return;

cart.push({name,price});
renderCart();
}

function renderCart(){
const list=document.getElementById("cartList");
list.innerHTML="";
let total=0;
cart.forEach(item=>{
total+=item.price;
list.innerHTML+=`<li>${item.name} - ${item.price} Ø¯.Ù„</li>`;
});
document.getElementById("cartTotal").innerText="Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: "+total+" Ø¯.Ù„";
}

function completeSale(){
let saleTotal=0;
cart.forEach(i=>saleTotal+=i.price);
totalSales+=saleTotal;
totalOrders++;
document.getElementById("todaySales").innerText=totalSales+" Ø¯.Ù„";
document.getElementById("totalOrders").innerText=totalOrders;
cart=[];
renderCart();
showToast("ØªÙ…Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨ÙŠØ¹ Ø¨Ù†Ø¬Ø§Ø­");
}

function addProduct(){
const name=document.getElementById("invName").value;
const qty=document.getElementById("invQty").value;
if(!name||!qty) return;

inventory.push({name,qty});
renderInventory();
document.getElementById("totalProducts").innerText=inventory.length;
showToast("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬");
}

function renderInventory(){
const table=document.getElementById("inventoryTable");
table.innerHTML="";
inventory.forEach(p=>{
table.innerHTML+=`<tr><td>${p.name}</td><td>${p.qty}</td></tr>`;
});
}

function sendPromo(){
showToast("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø­Ù…Ù„Ø© Ø§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠØ©");
}

function logout(){
location.href="login.html";
}

document.getElementById("userRole").innerText="Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©: "+userRole;
</script>

</body>
</html>
