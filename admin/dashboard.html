<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Baron Admin Panel</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:#0A0A0A;
    color:#EFEFEF;
    display:flex;
}

/* Sidebar */
.sidebar{
    width:250px;
    background:#111;
    height:100vh;
    padding:20px;
    box-shadow:0 0 20px rgba(181,60,184,0.3);
}

.sidebar h2{
    text-align:center;
    margin-bottom:30px;
}

.sidebar button{
    width:100%;
    margin-bottom:10px;
    padding:10px;
    background:none;
    border:1px solid #B53CB8;
    color:#EFEFEF;
    border-radius:8px;
    cursor:pointer;
}

.sidebar button:hover{
    background:#B53CB8;
}

/* Content */
.content{
    flex:1;
    padding:30px;
}

.section{
    display:none;
}

.section.active{
    display:block;
}

.card{
    background:#111;
    padding:15px;
    border-radius:10px;
    margin-bottom:15px;
    box-shadow:0 0 15px rgba(181,60,184,0.2);
}

button.action{
    background:#B53CB8;
    border:none;
    padding:6px 10px;
    border-radius:6px;
    color:white;
    cursor:pointer;
}

.logout{
    margin-top:30px;
    background:#444 !important;
}
</style>
</head>

<body>

<div class="sidebar">
<h2>Baron ğŸ‘‘</h2>

<button onclick="showSection('dashboard')">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
<button onclick="showSection('products')">ğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
<button onclick="showSection('orders')">ğŸ›’ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</button>
<button id="logoutBtn" class="logout">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
</div>

<div class="content">

<!-- Dashboard -->
<div id="dashboard" class="section active">
<h1>Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ğŸ‘‘</h1>
<p>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Baron Electronics</p>
</div>

<!-- Products -->
<div id="products" class="section">
<h1>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h1>

<input type="text" id="productName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬"><br><br>
<input type="number" id="productPrice" placeholder="Ø§Ù„Ø³Ø¹Ø±"><br><br>
<input type="text" id="productCategory" placeholder="Ø§Ù„ÙØ¦Ø©"><br><br>
<input type="text" id="productColor" placeholder="Ø§Ù„Ù„ÙˆÙ†"><br><br>
<textarea id="productDescription" placeholder="Ø§Ù„ÙˆØµÙ"></textarea><br><br>
<input type="text" id="productImage" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©"><br><br>

<button class="action" onclick="addProduct()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬</button>

<h3 style="margin-top:30px;">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>
<div id="productList"></div>
</div>

<!-- Orders -->
<div id="orders" class="section">
<h1>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h1>
<div id="ordersContainer"></div>
</div>

</div>

<script type="module">

import { auth, db } from "../firebase-config.js";
import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
import { collection, addDoc, getDocs, doc, updateDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

/* Ø­Ù…Ø§ÙŠØ© */
onAuthStateChanged(auth, (user)=>{
    if(!user){
        window.location.href="login.html";
    }
});

/* ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ */
document.getElementById("logoutBtn").addEventListener("click", ()=>{
    signOut(auth).then(()=>{
        window.location.href="login.html";
    });
});

/* ØªÙ†Ù‚Ù„ */
window.showSection = function(id){
    document.querySelectorAll(".section").forEach(sec=>{
        sec.classList.remove("active");
    });
    document.getElementById(id).classList.add("active");
};

/* Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ */
window.addProduct = async function(){

    const name = productName.value;
    const price = Number(productPrice.value);
    const category = productCategory.value;
    const color = productColor.value;
    const description = productDescription.value;
    const image = productImage.value;

    await addDoc(collection(db,"products"),{
        name,price,category,color,description,image,
        createdAt:new Date()
    });

    alert("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© ğŸ‘‘");
    loadProducts();
};

/* Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
async function loadProducts(){
    const snapshot = await getDocs(collection(db,"products"));
    productList.innerHTML="";
    snapshot.forEach(docSnap=>{
        const p = docSnap.data();
        productList.innerHTML+=`
            <div class="card">
                ${p.name} - ${p.price} Ø¯.Ù„
            </div>
        `;
    });
}
loadProducts();

/* Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª */
async function loadOrders(){
    const snapshot = await getDocs(collection(db,"orders"));
    ordersContainer.innerHTML="";
    snapshot.forEach(docSnap=>{
        const o = docSnap.data();
        ordersContainer.innerHTML+=`
            <div class="card">
                ${o.customerName} - ${o.total} Ø¯.Ù„ - ${o.status}
            </div>
        `;
    });
}
loadOrders();

</script>

</body>
</html>
