<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Baron System</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
--primary:#4F46E5;
--danger:#EF4444;
--success:#22C55E;
--bg:#F8FAFC;
--card:#FFFFFF;
--text:#111827;
}

body.dark{
--bg:#0F172A;
--card:#1E293B;
--text:#F1F5F9;
}

body{
margin:0;
font-family:'Cairo',sans-serif;
background:var(--bg);
color:var(--text);
display:flex;
transition:0.3s;
}

.sidebar{
width:260px;
background:var(--card);
height:100vh;
padding:20px;
box-shadow:0 0 20px rgba(0,0,0,0.05);
overflow-y:auto;
}

.sidebar h2{
margin-bottom:20px;
}

.sidebar button{
width:100%;
padding:10px;
margin-bottom:8px;
border:none;
background:none;
text-align:right;
cursor:pointer;
border-radius:8px;
}

.sidebar button:hover{
background:rgba(79,70,229,0.1);
}

.topbar{
position:fixed;
right:260px;
left:0;
height:60px;
background:var(--card);
display:flex;
align-items:center;
justify-content:space-between;
padding:0 20px;
box-shadow:0 2px 10px rgba(0,0,0,0.05);
}

.content{
margin-top:70px;
margin-right:260px;
padding:30px;
width:100%;
}

.section{
display:none;
}

.section.active{
display:block;
}

.card{
background:var(--card);
padding:20px;
border-radius:12px;
margin-bottom:15px;
box-shadow:0 5px 20px rgba(0,0,0,0.05);
}

.toast{
position:fixed;
bottom:20px;
left:20px;
background:var(--primary);
color:white;
padding:15px 20px;
border-radius:10px;
display:none;
}
.toggle{
cursor:pointer;
}
</style>
</head>

<body>

<div class="sidebar">
<h2>Baron System ğŸ‘‘</h2>

<button onclick="show('dashboard')">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
<button onclick="show('pos')">ğŸ›’ POS</button>
<button onclick="show('analytics')">ğŸ“Š Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª</button>
<button onclick="show('suppliers')">ğŸ¢ Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</button>
<button onclick="show('agents')">ğŸ‘¨â€ğŸ’¼ Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ†</button>
<button onclick="show('inventory')">ğŸ“¦ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</button>
<button onclick="show('invoices')">ğŸ§¾ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</button>
<button onclick="show('debts')">ğŸ’° Ø§Ù„Ø¯ÙŠÙˆÙ†</button>
<button onclick="show('subscriptions')">ğŸ’³ Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª</button>
<button onclick="show('maintenance')">ğŸ›  Ø§Ù„ØµÙŠØ§Ù†Ø©</button>
<button onclick="show('marketing')">ğŸ¯ Ø§Ù„ØªØ³ÙˆÙŠÙ‚</button>
<button onclick="show('orders')">ğŸ“¦ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</button>

<hr>
<button onclick="logout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
</div>

<div class="topbar">
<div>
<span id="userRole"></span>
</div>
<div>
<span class="toggle" onclick="toggleMode()">ğŸŒ™ / â˜€ï¸</span>
</div>
</div>

<div class="content">

<div id="dashboard" class="section active">
<div class="card">Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Baron System</div>
</div>

<div id="pos" class="section"><div class="card">Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨ÙŠØ¹ (Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±)</div></div>
<div id="analytics" class="section"><div class="card">Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª</div></div>
<div id="suppliers" class="section"><div class="card">Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†</div></div>
<div id="agents" class="section"><div class="card">Ø§Ù„Ù…Ù†Ø¯ÙˆØ¨ÙŠÙ†</div></div>
<div id="inventory" class="section"><div class="card">Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</div></div>
<div id="invoices" class="section"><div class="card">Ø§Ù„ÙÙˆØ§ØªÙŠØ±</div></div>
<div id="debts" class="section"><div class="card">Ø§Ù„Ø¯ÙŠÙˆÙ†</div></div>
<div id="subscriptions" class="section"><div class="card">Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª</div></div>
<div id="maintenance" class="section"><div class="card">Ø§Ù„ØµÙŠØ§Ù†Ø©</div></div>
<div id="marketing" class="section"><div class="card">Ø§Ù„ØªØ³ÙˆÙŠÙ‚</div></div>
<div id="orders" class="section"><div class="card">Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div></div>

</div>

<div id="toast" class="toast"></div>

<script type="module">

import { auth, db } from "../firebase-config.js";
import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
import { doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

window.show = function(id){
document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
document.getElementById(id).classList.add('active');
}

window.toggleMode = function(){
document.body.classList.toggle('dark');
localStorage.setItem('mode',document.body.classList.contains('dark')?'dark':'light');
}

if(localStorage.getItem('mode')==='dark'){
document.body.classList.add('dark');
}

window.showToast = function(msg){
const toast=document.getElementById('toast');
toast.innerText=msg;
toast.style.display='block';
setTimeout(()=>toast.style.display='none',3000);
}

window.logout = function(){
signOut(auth).then(()=>location.href="login.html");
}

onAuthStateChanged(auth, async (user)=>{
if(!user){location.href="login.html";return;}

const userDoc = await getDoc(doc(db,"users",user.uid));
if(userDoc.exists()){
const role=userDoc.data().role;
document.getElementById("userRole").innerText="Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©: "+role;
if(role==="staff"){
// Ø¥Ø®ÙØ§Ø¡ Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
document.querySelector("button[onclick=\"show('marketing')\"]").style.display="none";
document.querySelector("button[onclick=\"show('suppliers')\"]").style.display="none";
}
}
});

</script>

</body>
</html>
